{% extends 'SkreenHouseFactoryV3Bundle::layout.html.twig' %}

{% block title %}{{ 'page.title.user.vod'|trans }}{% endblock %}

{% block content %}
<div id="user-vods-view" class="container">

  <h1>{{ 'user.vod'|trans }}</h1>
  <ul class="nav nav-pills nav-alpha-client uppercase">
    <li{% if app.request.get('onglet') is null %} class="active"{% endif %}>
      <a href="{{ path('user_vod', {onglet: null}) }}">{{ 'nav.all'|trans }}</a>
    </li>
    {% for o in onglets %}
      <li{% if app.request.get('onglet') == o %} class="active"{% endif %}>
        <a href="{{ path('user_vod', {onglet: o}) }}">{{ o }}</a>
      </li>
    {% endfor %}
  </ul>

  {% if vods|length > 6 %}
  <div class="pagination pagination-client-alpha">
    <ul>
        <li{% if app.request.get('alpha') is null %} class="active"{% endif %}><a href="javascript://">{{ 'nav.all'|trans }}</a></li>
      {% for l in alpha %}
        <li{% if app.request.get('alpha') == l %} class="active"{% elseif l not in alpha_available %} class="disabled"{% endif %}><a href="javascript://">{{ l }}</a></li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

  <div id="user-programs" class="slider slider-list">
    <table class="table table-striped">
			<tbody>
	    {% for v in vods %}
        {#% set o_channel = attribute(vods.datas_offers.channels, v.offer.channel_id) %}
        {% set o_access = attribute(vods.datas_offers.access, v.offer.access_id) %#}
	      <tr>
						<td><a href="{{ v.program.seo_url }}"><img src="{{ v.program.picture }}" alt="{{ v.program.title }}" /></td>
						<td><a href="{{ v.program.seo_url }}">{{ v.program.title }}</a><br/>Loué le {{ v.created_at|localizeddate('full', 'none') }}</td>
						<td><img src="{#{ o_channel.img }}" alt="{{ o_channel.name }#}" /></td>
						<td>{#{ o_access.name }#}</td>
						<td>{% if v.is_available %}<span class="label label-success">Visible encore {{ v.timeleft|localizeddate('full', 'none') }}</span>{% else %}<span class="label label-warning">Expiré le {{ v.expire_at|localizeddate('full', 'none') }}</span>{% endif %}</a></td>
						<td><a class="btn" data-play="{{ v.offer.id }}"><i class="icon-play"></i> {{ v.is_available ? 'watch'|trans : 'rent.again'|trans }}</a></td>
				</tr>
	    {% endfor %}
			</tbody>
    </table>
  </div>
</div>
{% endblock %}