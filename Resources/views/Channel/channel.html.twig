{% extends app.request.isXmlHttpRequest or app.request.get('xhr') ? "SkreenHouseFactoryV3Bundle::empty.html.twig" : "SkreenHouseFactoryV3Bundle::layout.html.twig" %}

{% block meta %}
<meta property="og:title" content="{% if app.request.get('format') %}{{ app.request.get('format') }} : {% endif %}{{ data.name }}{% if app.request.get('page') %}, page {{ app.request.get('page') }}{% endif %}{% if app.request.get('facet') %}, {{ app.request.get('facet') }}{% endif %}" />
<meta property="og:description" content="{{ data.description|striptags }}" />
<meta property="og:type" content="video.movie" />
<meta property="og:url" content="http://www.myskreen.com{{ data.seo_url }}/" />
{% if data.channel.img is defined %}
<meta property="og:image" content="{{ data.channel.img }}" />
<link rel="image_src" href="{{ data.channel.img }}" />
{% elseif data.channel.cover is defined %}
<meta property="og:image" content="{{ data.channel.cover }}" />
<link rel="image_src" href="{{ data.channel.cover }}" />
{% endif %}
<meta name="object_type" content="channel" />
{% endblock %}

{% block title %}{{ channel.title }}{% endblock %}
{% block description %}{{ channel.description|replace({"\n": ''})|striptags|slice(0, 165) }}{% endblock %}
{% block body_class %}view-channel cover{% endblock %}
{% block body_background %}
{% if channel.cover %}url('{{ channel.fournisseur is defined ? channel.cover|replace({'/1500/450/c': ''}) : channel.cover }}') top center no-repeat{% endif %}
{% endblock %}

{% block content %}

{# modal #}
{% include 'SkreenHouseFactoryV3Bundle:Channel:_modal.html.twig' ignore missing with {'data': data} %}

{% if channel.type == 'ChannelFournisseur' or data.channel.fournisseur is defined %}
  {% include 'SkreenHouseFactoryV3Bundle:Channel:_channel_fournisseur.html.twig' with { data: data.channel.fournisseur, sliders: data.sliders, channel: data.channel } %}
{% elseif channel.type == 'ChannelOnglet' %}
  {% include 'SkreenHouseFactoryV3Bundle:Channel:_channel_onglet.html.twig' with {data:data , channel: channel,custom_header:custom_header} %}
{% elseif channel.type == 'ChannelPersonne' %}
  {% include 'SkreenHouseFactoryV3Bundle:Channel:_channel_personne.html.twig' with {data:data} %}
{% elseif channel.type == 'ChannelMyskreener' %}
  {% include 'SkreenHouseFactoryV3Bundle:Channel:_channel_user.html.twig' with {data:data} %}
{% endif %}
{% endblock %}

{% block pagescripts %}
{% javascripts
    '@SkreenHouseFactoryV3Bundle/Resources/public/js/vendors/jquery.countdown.js'
    filter='?yui_js' 
    output='js/compiled/countdown.js'  %}
    <script src="{{ asset_url }}"></script>
{% endjavascripts %}
{% javascripts
    '@SkreenHouseFactoryV3Bundle/Resources/public/js/scripts/channel.js'
    filter='?yui_js' 
    output='js/compiled/pages/channel.js'  %}
    <script src="{{ asset_url }}"></script>
{% endjavascripts %}
{% endblock %}
