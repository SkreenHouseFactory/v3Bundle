{% if app.environment == 'prod' %}
{% set base_url = 'preprod' not in app.request.httpHost  ? 'http://www.myskreen.com' : '' %}
{% else %}
{% set base_url = '/app_dev.php' %}
{% endif %}
{% if p is not defined or p.title is not defined %}
{% set p = {title:'%title%',
            id:'%id%',
            picture:'',
            onglet:'%onglet%',
            seo_url:'',
            has_vod:'%has_vod%',
            best_offer:'',
            deporte:''} %}
{% endif %}
{% if ' - ' in p.title %}
  {% set tmp = p.title|split(' - ') %}
  {% set p_title = tmp[1] ~ ' / ' ~ tmp[0] %}
{% else %}
  {% set p_title = p.title %}
{% endif %}
<li class="tv-component actions{{ p.onglet is defined ? ' ' ~ p.onglet : '' }}{% if p.id == '%id%' %} slider-sample{% endif %}{% if p.deporte %} deporte{% endif %}{% if 'missing' in p.picture %} missing-picture{% endif %}" data-id="{% if p.episodeof.id is defined %}{{ p.episodeof.id }}{% else %}{{ p.id }}{% endif %}" data-play-program-id="{{ p.id }}" style="{% if p.picture %}background-image:url({{ p.picture }}){% endif %}"{% if p.alpha is defined %} data-alpha="{{ p.alpha }}"{% endif %}>
  {% if header is defined %}{{ header|raw }}{% endif %}
  {% if p.onglet != 'channel' %}
    {% if p.best_offer is defined and p.best_offer.channel_id is defined %}
    <a class="channel logo-channel-{{ p.best_offer.channel_id }}">
      {% if p.best_offer.channel_img is defined and p.best_offer.channel_name is defined %}
      <img src="{{ p.best_offer.channel_img }}" alt="{{ p.best_offer.channel_name }}">
      {% endif %}
      {% if p.best_offer.broadcastdate is defined %}
      <span class="diff">{{ p.best_offer.broadcastdate|replace(' à', ' à') }}</span>
      {% endif %}
    </a>
    {% else %}
    <a class="channel{% if p.popular_channel is defined %} logo-channel-{{ p.popular_channel.id }}{% endif %}"{% if p.popular_channel is defined %} href="{{ base_url }}{{ p.popular_channel.seo_url }}"{% endif %}>
      {%- if p.popular_channel is defined -%}
      <img src="{{ p.popular_channel.img }}" alt="{{ p.popular_channel.name }}" />
      {%- endif -%}
      <span class="diff">
      {#%- if p.deporte == true %}<i class="icon-th icon-white"></i> {{ 'action.play.deporte'|trans }}#}
      {%- if p.has_vod == 4 %}{{ 'action.play.cine'|trans }}
      {%- elseif p.has_vod == 3 %}{{ 'action.play.dvd'|trans }}
      {%- elseif p.has_vod == 5 %}{{ 'action.play.tv'|trans }}
      {%- elseif p.has_vod == 6 %}{{ 'action.play.rec'|trans }}
      {%- elseif p.has_vod in [7,8,9,10] %}{{ 'action.play.replay'|trans }}
      {%- elseif p.has_vod == 13 %}{{ 'action.play.archive'|trans }}
      {%- elseif p.has_vod != '%has_vod%' %}{{ 'action.play.streaming'|trans }}{% endif -%}
    </span>
    </a>
    {% endif %}
  {% endif %}
  <a {% if p.seo_url %}href="{{ base_url }}{{ p.seo_url }}{{ theater_id is defined and theater_id > 0 ? '?theater_id=' ~ theater_id : '' }}"{% endif %} target="_top" class="title"><i class="icon-th icon-white"></i> {{ p_title }}</a>
</li>